# 还我一个土木梦 - 游戏策划文档

> **版本**: v1.0
> **更新日期**: 2026-01-27
> **文档类型**: 游戏机制与规则说明

---

## 目录

1. [游戏概述](#1-游戏概述)
2. [核心数值系统](#2-核心数值系统)
3. [职级系统](#3-职级系统)
4. [事件系统](#4-事件系统)
5. [能力系统](#5-能力系统)
6. [材料市场系统](#6-材料市场系统)
7. [关系系统](#7-关系系统)
8. [行动系统](#8-行动系统)
9. [团队系统](#9-团队系统)
10. [季度结算系统](#10-季度结算系统)
11. [胜利与失败条件](#11-胜利与失败条件)

---

## 1. 游戏概述

### 1.1 游戏定位

**类型**: 职业模拟 / 策略经营 / 卡牌决策
**平台**: H5 网页游戏
**目标受众**: 土木工程行业从业者、模拟经营爱好者
**核心玩法**: 通过事件决策、资源管理、关系维护，从实习生晋升为合伙人

### 1.2 核心循环

```
人物创建 → 事件阶段(处理事件卡) → 策略阶段(交易/关系维护)
    ↓
季度结算(工资/收支/晋升检查) → 循环 → 晋升合伙人(胜利)或破产/过劳/封杀(失败)
```

### 1.3 游戏阶段

| 阶段 | 职级范围 | 特点 |
|------|---------|------|
| 前期 | 实习生 → 高级工程师 | 积累属性、熟悉系统 |
| 后期 | 项目经理 → 合伙人 | 团队管理、战略决策 |

---

## 2. 核心数值系统

### 2.1 玩家属性

| 属性 | 范围 | 初始值 | 危险阈值 | 作用 |
|------|------|--------|---------|------|
| **现金** 💰 | 0-∞ | 50,000 | < 5,000 | 购买材料、维护关系、生活开销 |
| **健康** ❤️ | 0-100 | 100 | < 20 | 执行行动的基础，过低导致游戏失败 |
| **声誉** ⭐ | 0-100 | 50 | < 30 | 晋升要求，过低导致行业封杀 |
| **工作能力** 📚 | 0-100 | 0-10 | - | 解锁隐藏选项、关系加成、价格预测 |
| **幸运** 🎲 | 0-100 | 0-10 | - | 解锁冒险选项、贵人相助、特殊事件 |

### 2.2 项目状态

| 状态 | 范围 | 初始值 | 说明 |
|------|------|--------|------|
| **进度** | 0-100+ | 0 | 通过行动积累，≥100可完工 |
| **质量** | 0-100 | 0 | 影响项目评价，≥90为优质项目 |

### 2.3 数值变化规则

- **现金**: 无上限，可为负数（破产）
- **健康/声誉/工作能力/幸运**: 0-100，自动限制在范围内
- **进度/质量**: 无上限，≥100即可完工

---

## 3. 职级系统

### 3.1 职级阶梯（7级）

| 职级 | 图标 | 净资产要求 | 项目数要求 | 声誉要求 | 特殊要求 | 季度工资 |
|------|------|-----------|-----------|---------|---------|---------|
| 实习生 | 🎓 | 0 | 0 | 0 | - | 9,000（固定） |
| 助理工程师 | 👷 | 10万 | 2 | 40 | - | 15,000 - 20,000 |
| 工程师 | 👨‍🔧 | 50万 | 5 | 60 | - | 36,000 - 48,000 |
| 高级工程师 | 👨‍💼 | 150万 | 10 | 70 | 1个优质项目 | 60,000 - 90,000 |
| 项目经理 | 📋 | 500万 | 15 | 80 | 3个项目 | 10万 - 14万 |
| 项目总监 | 🎯 | 1,500万 | 25 | 90 | 5个优质项目 | 16.5万 - 28万 |
| 合伙人 | 👑 | 5,000万 | 40 | 95 | 10个优质项目 | 30万（分红制） |

### 3.2 晋升检查

**检查时机**: 每季度结算时

**晋升条件**:
1. 净资产 ≥ 职级要求
2. 完成项目数 ≥ 职级要求
3. 声誉 ≥ 职级要求
4. 满足特殊要求（如有）
5. **满足关系要求**（详见下表）

**关系要求表**:

| 职级晋升 | 核心关系要求 | 说明 |
|---------|-------------|------|
| 实习生 → 助理工程师 | 监理 ≥ 60 | 实习生主要在工地配合监理工作 |
| 助理工程师 → 工程师 | 设计院 ≥ 65 | 工程师需要对接设计变更 |
| 工程师 → 高级工程师 | 劳务队 ≥ 70 | 高工需要管理劳务队伍 |
| 高级工程师 → 项目经理 | 甲方 ≥ 75 + 监理 ≥ 70 | 项目经理需要搞定甲乙双方 |
| 项目经理 → 项目总监 | 甲方 ≥ 80 + 政府 ≥ 70 | 总监级需要政府资源和甲方支持 |
| 项目总监 → 合伙人 | 所有关系 ≥ 75 | 合伙人需要全方位资源 |

**晋升奖励**:
- 职级提升
- 基础工资提升
- 工作能力 +10 / 幸运 +8
- 季度开始时立即生效

### 3.3 涨薪机制

**涨薪概率**: 60%（每季度）
**排除**: 实习生和合伙人（实习生不涨薪，合伙人分红制）

**涨薪幅度**: 基于当前职级的 `raiseRange`

```typescript
// 计算公式
涨薪幅度 = random(minRaise%, maxRaise%) // 基于当前职级配置
新工资 = 当前工资 × (1 + 涨薪幅度 / 100)
```

**示例**: 工程师（工资36,000，涨薪范围5%-12%）
- 最低涨幅: 36,000 × 1.05 = 37,800
- 最高涨幅: 36,000 × 1.12 = 40,320

---

## 4. 事件系统

### 4.1 事件分类

| 类别 | 图标 | 说明 | 触发职级 |
|------|------|------|---------|
| **专业型** | 🔧 | 技术决策、工程质量、项目管理 | 全职级 |
| **职场型** | 💼 | 人际关系、职业发展、办公室政治 | 全职级 |

### 4.2 事件池分配

| 职级 | 专业型事件 | 职场型事件 | 总计 |
|------|-----------|-----------|------|
| 实习生 | 5个 | 5个 | 10个 |
| 助理工程师 | 5个 | 5个 | 10个 |
| 工程师 | 5个 | 5个 | 10个 |
| 高级工程师 | 5个 | 5个 | 10个 |
| 项目经理 | 5个 | 5个 | 10个 |
| 项目总监 | 5个 | 5个 | 10个 |
| 合伙人 | 5个 | 5个 | 10个 |
| **通用事件** | 8个 | - | 8个 |

### 4.3 决策选项类型

#### 4.3.1 普通选项

- **标识**: 无特殊标识
- **触发**: 始终显示
- **特点**: 基础选择，风险可控

#### 4.3.2 隐藏技术选项 🔧

- **标识**: `🔧 技术方案优化（需工作能力≥XX）`
- **触发条件**: `stats.workAbility >= requiredAbility.workAbility`
- **特点**: 效果更好，需要高工作能力
- **示例阈值**:
  - 实习生: 工作能力 ≥20
  - 助理工程师: 工作能力 ≥25
  - 工程师: 工作能力 ≥30
  - 高级工程师: 工作能力 ≥50
  - 项目经理: 工作能力 ≥45
  - 项目总监: 工作能力 ≥55
  - 合伙人: 工作能力 ≥60

#### 4.3.3 隐藏冒险选项 🎲

- **标识**: `🎲 豪赌XXX（需幸运≥XX）`
- **触发条件**: `stats.luck >= requiredAbility.luck`
- **特点**: 高风险高回报，可能失败
- **风险机制**:

```typescript
// 成功判定公式
成功阈值 = 100 - riskFactor × 100 + luck / 2
随机值 = random(0, 100)

if (随机值 > 成功阈值) {
  // 失败：应用 effects.failure
} else {
  // 成功：应用 effects
}
```

**示例**:
- `riskFactor = 0.3`, `luck = 50`
- 成功阈值 = 100 - 30 + 25 = 95
- 95% 成功率

**失败效果示例**:
- 成功：`reputation +3, cash +500`
- 失败：`reputation -5, cash -3000`

### 4.4 事件触发机制

**触发配置** (`EVENT_TRIGGER_CONFIG`):
```typescript
每消耗 2 行动点 → 检测是否触发事件
触发概率: 50%
```

**事件状态**:
- `PENDING`: 待处理（可延迟2次行动）
- `PROCESSED`: 已处理
- `EXPIRED`: 已过期（延迟超过期限）
- `IGNORED`: 已忽略（声誉惩罚 -10）

### 4.5 季度开始/结束事件

#### 4.5.1 季度开始事件池

每次季度开始随机抽取 2-3 个事件同时发生。

**正面事件**:
- 季度奖金: `cash +5000, reputation +2`
- 身体状况良好: `health +10`
- 领导表扬: `reputation +5`
- 市场需求旺盛: `progress +5`
- 团队士气高涨: `quality +5`
- 关系融洽: `reputation +3, cash -1000`

**负面事件**:
- 市场低迷: `cash -3000, reputation -2`
- 身体不适: `health -8`
- 工期压力: `health -5, progress +3`
- 甲方投诉: `reputation -5, cash -2000`
- 材料涨价: `cash -4000`
- 质量问题: `quality -5, progress -3, cash -2000`
- 劳务纠纷: `cash -3000, reputation -2`

#### 4.5.2 随机奖金事件

**触发概率**: 每季度 2%-5%

| 事件 | 奖励 | 概率 |
|------|------|------|
| 年终奖 | `+20,000现金` | 5% |
| 项目奖金 | `+15,000现金` | 4% |
| 保险索赔 | `+8,000现金` | 3% |
| 政府补贴 | `+10,000现金` | 3% |
| 甲方追加款 | `+12,000现金` | 3% |
| 意外之财 | `+5,000现金` | 2% |

#### 4.5.3 天灾事件

**触发概率**: 每季度 1%-2%

| 事件 | 惩罚 | 概率 |
|------|------|------|
| 工伤事故 | `-15,000现金, -10健康` | 2% |
| 材料被盗 | `-8,000现金` | 2% |
| 暴雨损失 | `-10,000现金, -5进度` | 2% |
| 监理罚款 | `-5,000现金, -5声誉` | 1% |
| 设备故障 | `-12,000现金, -5进度` | 1% |
| 工人罢工 | `-8,000现金, -5声誉, -5进度` | 1% |

---

## 5. 能力系统

### 5.1 工作能力 📚

#### 5.1.1 获取方式

| 方式 | 效果 | 消耗 | 成功率 |
|------|------|------|--------|
| 人物创建 | 0-10（总和固定10） | - | 100% |
| 基础训练（专业培训） | +5 | 2,000现金, 5健康 | 100% |
| 高级训练（考取证书） | +8 | 3,000现金, 8健康 | 50 + 幸运/2 % |
| 晋升加成 | +10, +8, +6, +5, +4, +3 | - | 100% |
| 事件选项 | +2 ~ +3 | 变动 | - |

#### 5.1.2 作用机制

**1. 价格预测**

```typescript
预测准确率 = 50 + workAbility / 2

// 示例
workAbility = 0 → 准确率 50%（纯猜测）
workAbility = 50 → 准确率 75%
workAbility = 100 → 准确率 100%（完全准确）
```

**显示内容**: 准确率、趋势（上涨/下跌/稳定）、价格区间

**2. 隐藏技术选项解锁**

- 工作能力达到阈值解锁特殊选项
- 阈值根据职级递增（20-60）

**3. 关系维护加成**

```typescript
// 条件
workAbility ≥ 60 && (关系类型 == 设计院 || 监理)

// 效果
关系维护收益 × 1.2（+20%）

// UI 显示
"设计院关系+12 (🔧工作能力+20%)"
```

**4. 训练成功率提升**

```typescript
高级训练成功率 = 50 + workAbility / 2

// 示例
workAbility = 30 → 65% 成功率
workAbility = 100 → 100% 成功率
```

### 5.2 幸运 🎲

#### 5.2.1 获取方式

| 方式 | 效果 | 消耗 | 成功率 |
|------|------|------|--------|
| 人物创建 | 0-10（总和固定10） | - | 100% |
| 基础训练（参加行业活动） | +3 | 1,000现金, 2健康 | 100% |
| 高级训练（外出社交） | +5 | 1,500现金, 3健康 | 50 + 幸运/2 % |
| 晋升加成 | +8, +6, +5, +4, +3 | - | 100% |
| 事件选项 | 变动 | 变动 | - |

#### 5.2.2 作用机制

**1. 隐藏冒险选项解锁**

- 幸运达到阈值解锁冒险选项
- 阈值根据职级递增（25-60）

**2. 冒险选项成功率**

```typescript
成功阈值 = 100 - riskFactor × 100 + luck / 2

// 示例
riskFactor = 0.3, luck = 40
成功阈值 = 100 - 30 + 20 = 90（90%成功率）
```

**3. 贵人相助机制**

```typescript
// 触发条件
luck ≥ 60 && random(0, 100) < 15  // 15%概率

// 两种效果（50%概率）
1. 免费维护: 关系+10, 无消耗
2. 效果翻倍: 关系收益×2, 正常消耗

// UI 显示
"✨ 贵人相助：关系提升双倍！+24 (🔧工作能力+20%)"
```

**4. 特殊事件概率**

```typescript
特殊事件概率 = 2 + luck / 20

// 示例
luck = 0 → 2% 概率
luck = 50 → 4.5% 概率
luck = 100 → 7% 概率
```

**5. 训练成功率提升**

```typescript
高级训练成功率 = 50 + luck / 2

// 示例
luck = 20 → 60% 成功率
luck = 100 → 100% 成功率
```

---

## 6. 材料市场系统

### 6.1 材料类型

| 材料 | 图标 | 单位 | 基准价格 | 波动幅度 | 仓储费 |
|------|------|------|---------|---------|--------|
| 水泥 | 🧱 | 吨 | 45 | ±20% | 0.5/季度/吨 |
| 钢筋 | 🔩 | 吨 | 420 | ±15% | 1.5/季度/吨 |
| 砂石 | ⛰️ | 立方 | 12 | ±25% | 0.2/季度/立 |
| 混凝土 | 🏗️ | 立方 | 38 | ±18% | 0.8/季度/立 |

### 6.2 价格波动机制

**初始价格**:
```typescript
当前价格 = 基准价格 × (1 + random(-波动幅度, 波动幅度))
```

**季度变化**:
- 每季度重新计算价格
- 受价格事件影响（临时涨价/降价）

**价格事件**:

| 事件 | 影响材料 | 倍数 | 持续 |
|------|---------|------|------|
| 环保督查加强 | 水泥 | ×1.5 | 2季度 |
| 基建热潮 | 水泥、钢筋 | ×1.3 | 3季度 |
| 暴雨影响 | 砂石 | ×1.5 | 1季度 |
| 市场低迷 | 全部 | ×0.7 | 3季度 |

### 6.3 交易机制

**交易限制**:
- 每季度最多交易 3 次（买卖合并计数）
- 最小/最大交易量按材料类型

**交易结果**:
```typescript
// 买入
cash -= 数量 × 当前价格
inventory += 数量

// 卖出（FIFO - 先进先出）
inventory -= 数量
cash += 数量 × 当前价格
利润 = 数量 × (当前价格 - 平均成本)
```

### 6.4 价格预测系统

**计算公式**:
```typescript
准确率 = 50 + workAbility / 2  // 50%-100%

趋势判定 = random(0, 100) < 准确率
  ? true  // 预测正确
  : false // 预测错误

价格范围 = 基准价格 × (1 ± 波动幅度 × (100 - 准确率) / 100)
```

**UI 显示**:
- 准确率百分比
- 趋势（上涨📈/下跌📉/稳定➡️）
- 价格区间

---

## 7. 关系系统

关系系统是游戏的核心机制之一，通过五大机制让关系维护变得至关重要：

1. **晋升硬性门槛**：每个职级需要特定核心关系达标
2. **专属维护方式**：每种关系 2 种维护方法，不同风险/收益
3. **负面事件触发**：关系低时随机负面事件，极低时功能限制
4. **经济收益解锁**：高关系解锁赚钱机会（每季度 5000+ 收益）
5. **特殊剧情事件**：高关系解锁专属事件

### 7.1 关系类型

| 关系 | 图标 | 初始值 | 衰减率 | 维护成本 | 解锁职级 |
|------|------|--------|--------|---------|---------|
| 甲方 | 🤵 | 50 | 4/季度 | 高 | 实习生 |
| 监理 | 📝 | 50 | 3/季度 | 中 | 助理工程师 |
| 设计院 | 📐 | 50 | 3/季度 | 中 | 工程师 |
| 劳务队 | 👷 | 50 | 2/季度 | 低 | 实习生 |
| 政府部门 | 🏛️ | 50 | 5/季度 | 高 | 高级工程师 |

### 7.2 维护方式（10种）

每种关系都有 2 种专属维护方式，风险和收益各不相同：

#### 7.2.1 甲方关系维护

**方式1：应酬宴请** 🍻
- **消耗**：现金 2000 + 健康 3
- **收益**：甲方关系 +8-12（随机）
- **风险**：15% 概率"过度应酬" → 健康 -5（额外）
- **加成**：workAbility ≥ 50 → 收益 × 1.2

**方式2：项目汇报** 📊
- **消耗**：健康 2
- **收益**：甲方关系 +5-8（稳定）
- **加成**：项目进度 ≥ 50 → 收益 +2

#### 7.2.2 设计院关系维护

**方式1：技术交流** 💡
- **消耗**：健康 2
- **收益**：设计院关系 +6-10 + workAbility +1
- **条件**：health ≥ 30
- **特殊**：workAbility ≥ 60 → 20% 获得"设计优化方案"（quality +5, progress +3）

**方式2：图纸会审** 📐
- **消耗**：健康 3
- **收益**：设计院关系 +4-7 + quality +1
- **特殊**：10% 概率提前发现图纸问题 → progress +2
- **加成**：workAbility ≥ 45 → 概率提升至 18%

#### 7.2.3 劳务队关系维护

**方式1：现场慰问** 🎁
- **消耗**：现金 500
- **收益**：劳务队关系 +5-8
- **风险**：10% 概率"劳务纠纷" → 需支付 2000 或关系 -5
- **加成**：reputation ≥ 50 → 收益 × 1.3

**方式2：解决纠纷** ⚖️
- **消耗**：现金 0-3000（根据纠纷程度）
- **收益**：劳务队关系 +8-15（关系越低收益越高）
- **条件**：劳务队关系 ≤ 40 时可用
- **风险**：50% 概率需要支付高额费用
- **加成**：luck ≥ 50 → 高额费用概率降为 30%

#### 7.2.4 监理关系维护

**方式1：礼品赠送** 🎁
- **消耗**：现金 1000
- **收益**：监理关系 +7-10
- **风险**：20% 概率"廉政检查" → reputation -5，关系 -8
- **限制**：连续 3 次使用收益递减
- **加成**：luck ≥ 40 → 检查概率降为 10%

**方式2：配合验收** ✅
- **消耗**：健康 2
- **收益**：监理关系 +4-6 + quality +1
- **特殊**：15% 概率监理主动放水 → 下次验收自动通过（progress +3）
- **加成**：workAbility ≥ 50 → 收益 × 1.3

#### 7.2.5 政府关系维护

**方式1：公关拜访** 🏛️
- **消耗**：现金 3000 + 健康 4
- **收益**：政府关系 +5-9
- **特殊**：30% 概率"大领导在家" → +15 关系
- **加成**：reputation ≥ 70 → 大领导概率 45%
- **惩罚**：cash < 3000 → 关系 -10

**方式2：政策学习** 📖
- **消耗**：健康 3
- **收益**：政府关系 +4-7
- **加成**：workAbility ≥ 55 → 收益 +2
- **特殊**：workAbility ≥ 70 → 10% 获得"政策解读"（下次季度仓储费 -50%）

### 7.3 关系维护限制

- **每季度最多维护次数** = 职级等级 + 1
- **实习生**: 1次
- **助理工程师**: 2次
- **工程师**: 3次
- **高级工程师**: 4次
- **项目经理**: 5次
- **项目总监**: 6次
- **合伙人**: 8次

### 7.4 负面事件触发机制

#### 7.4.1 触发概率

**触发时机**：每个季度结算时检查所有关系

| 关系值范围 | 触发概率 | 事件类型 |
|----------|---------|---------|
| 40-49 | 25% | 轻度负面 |
| 30-39 | 40% | 中度负面 |
| 20-29 | 60% | 重度负面 |
| 10-19 | 80% | 危机事件 |
| 0-9 | 100% | 灾难性（可能导致游戏结束） |

#### 7.4.2 甲方关系负面事件

| 关系值 | 事件 | 影响 |
|-------|------|------|
| ≤40 | 甲方刁难 | progress -2, reputation -2 |
| ≤30 | 工程款拖延 | cash -5000, 甲方关系 -5 |
| ≤20 | 甲方威胁停工 | progress -5, health -5 |
| ≤10 | 被踢出项目 | reputation -15, cash -10000 |
| 0 | 彻底决裂 | reputation -50，游戏结束 |

#### 7.4.3 监理关系负面事件

| 关系值 | 事件 | 影响 |
|-------|------|------|
| ≤40 | 监理挑刺 | quality -2, progress -1 |
| ≤30 | 频繁返工 | cash -3000, progress -3 |
| ≤20 | 停工整改 | progress -8, cash -8000 |
| ≤10 | 吊销执业资格 | reputation -20 |
| 0 | 行业封杀 | reputation -50，游戏结束 |

#### 7.4.4 设计院关系负面事件

| 关系值 | 事件 | 影响 |
|-------|------|------|
| ≤40 | 图纸变更慢 | progress -2 |
| ≤30 | 设计配合消极 | quality -2 |
| ≤20 | 重大设计错误 | cash -10000, quality -5 |
| ≤10 | 设计院断绝合作 | progress -20, reputation -10 |
| 0 | 设计全面崩溃 | reputation -50, progress -30，游戏结束 |

#### 7.4.5 劳务队关系负面事件

| 关系值 | 事件 | 影响 |
|-------|------|------|
| ≤40 | 工人消极怠工 | progress -2, quality -1 |
| ≤30 | 劳务罢工 | progress -5, cash -2000 |
| ≤20 | 群体事件 | reputation -10, cash -5000 |
| ≤10 | 劳务队集体离职 | progress -15, cash -8000，游戏结束 |
| 0 | 劳务全面断供 | reputation -50, cash -15000，游戏结束 |

#### 7.4.6 政府关系负面事件

| 关系值 | 事件 | 影响 |
|-------|------|------|
| ≤40 | 检查增多 | health -3, progress -1 |
| ≤30 | 行政处罚 | cash -5000, reputation -5 |
| ≤20 | 项目被叫停 | progress -10, cash -15000 |
| ≤10 | 被列入黑名单 | reputation -30, cash -20000，游戏结束 |
| 0 | 吊销资质 | reputation -50，游戏结束 |

### 7.5 功能限制

**触发条件**：任意关系 ≤ 15

| 关系类型 | 功能限制 | 解锁条件 |
|---------|---------|---------|
| 甲方 ≤ 15 | 无法获得新项目，现有项目收益 -50% | 甲方 > 15 |
| 监理 ≤ 15 | 工程验收自动失败，无法完成季度 | 监理 > 15 |
| 设计院 ≤ 15 | 无法提升 quality，工程质量锁定 | 设计院 > 15 |
| 劳务队 ≤ 15 | progress 增益减半，工人流失率 ×3 | 劳务队 > 15 |
| 政府 ≤ 15 | 每季度额外缴纳"罚款" 3000，无法晋升 | 政府 > 15 |

### 7.6 预警系统

- **关系 ≤ 50**：提示"XX 关系紧张，建议维护"
- **关系 ≤ 30**：红色警告"XX 关系危急，可能触发负面事件"
- **关系 ≤ 15**：紧急警报"XX 关系崩溃，功能已受限"

### 7.7 经济收益解锁

#### 7.7.1 解锁机制

| 关系类型 | 解锁阈值 | 触发时机 |
|---------|---------|---------|
| 甲方 | ≥ 75 | 每季度 20% 概率（≥90 时 35%） |
| 监理 | ≥ 70 | 季度结算自动触发 |
| 设计院 | ≥ 75 | 完成项目时触发 |
| 劳务队 | ≥ 70 | 季度结算自动触发 |
| 政府 | ≥ 80 | 每季度 15% 概率（≥90 时 25%） |

#### 7.7.2 具体收益

**甲方关系 ≥ 75：甲方推荐项目**
- 选项 A：接下项目
  - 收益：cash +8000~15000（随机）
  - 消耗：health -3，progress +3
  - 风险：10% 概率项目出问题 → reputation -5
- 加成：workAbility ≥ 50 → 出问题概率降为 5%

**监理关系 ≥ 70：验收快速通过奖金**
```typescript
奖金 = 3000 + (监理关系 - 70) × 100
// 监理 70 分：+3000
// 监理 100 分：+6000
```

**设计院关系 ≥ 75：设计优化奖励**
- 选项 A：采纳优化方案
  - 收益：下次项目材料成本 -30%
  - 设计院关系 +2
- 经济价值：节省 1500-2400 材料

**劳务队关系 ≥ 70：劳务成本优惠**
```typescript
优惠 = (劳务关系 - 70) × 50
// 劳务 70 分：+0
// 劳务 100 分：+1500
```

**政府关系 ≥ 80：政府补贴项目**
- 收益：cash +10000~20000（随机）
- reputation +3
- 政府关系 +2
- 加成：reputation ≥ 70 → 补贴 × 1.2

#### 7.7.3 组合效应示例

甲方 80 + 监理 75 + 劳务队 80：
- 验收奖金：+4500（监理 75）
- 劳务优惠：+500（劳务 80）
- 期望甲方项目：+2000 × 0.2 = +400
- **每季度期望收益：+5400**

### 7.8 特殊事件解锁

| 关系类型 | 解锁阈值 | 事件数量 | 触发方式 |
|---------|---------|---------|---------|
| 甲方 | ≥ 80 | 3 个 | 事件阶段 15% 概率替代普通事件 |
| 监理 | ≥ 75 | 3 个 | 事件阶段 15% 概率替代普通事件 |
| 设计院 | ≥ 80 | 3 个 | 事件阶段 15% 概率替代普通事件 |
| 劳务队 | ≥ 75 | 3 个 | 事件阶段 15% 概率替代普通事件 |
| 政府 | ≥ 85 | 3 个 | 事件阶段 15% 概率替代普通事件 |

**特点**：
- ⭐ 标记特殊事件
- 剧情更丰富，多段对话
- 奖励更丰厚（5000-20000）
- 风险更高（部分有 riskFactor）
- 解锁隐藏选项

### 7.9 属性加成

**工作能力加成** (workAbility ≥ 60):
- 设计院、监理维护收益 × 1.2
- 解锁更多隐藏技术选项

**贵人相助** (luck ≥ 60):
- 15% 概率触发
- 效果: 免费维护 或 收益翻倍

---

## 8. 行动系统

### 8.1 行动点机制

**最大行动点计算**:
```typescript
maxActionPoints = floor(健康 / 20)

// 示例
健康 = 100 → 5行动点
健康 = 60 → 3行动点
健康 = 20 → 1行动点
```

**行动点恢复**:
- 季度开始时: +2健康（QUARTER_HEALTH_REGEN）
- 休息行动: +12健康

### 8.2 基础行动（前期）

| 行动 | 图标 | 消耗 | 效果 |
|------|------|------|------|
| 做项目 | 🏗️ | 1行动点, 5,000现金 | 进度+10, 质量+5, 健康-5 |
| 承接私活 | 💼 | 1行动点 | 现金+15,000, 健康-8, 声誉-5 |
| 偷工减料 | ⚠️ | 1行动点 | 进度+18, 质量-12, 声誉-3, 健康-3 |
| 休息 | 😴 | 1行动点 | 健康+12 |

### 8.3 高级行动（后期）

| 行动 | 图标 | 消耗 | 效果 |
|------|------|------|------|
| 招募成员 | 👥 | 1行动点, 招募成本 | 添加团队成员 |
| 团队项目 | 🎯 | 1行动点 | 委派团队执行项目 |
| 解决问题 | 🔧 | 1行动点 | 处理团队问题 |

### 8.4 行动限制

- 每季度最多行动次数: 8次 (MAX_ACTIONS_PER_QUARTER)
- 事件触发检测: 每消耗 2 行动点检测一次

---

## 9. 团队系统

### 9.1 团队成员类型

| 成员 | 图标 | 基础工资 | 招募成本 | 技能范围 |
|------|------|---------|---------|---------|
| 工程师 | - | 20,000/季度 | 15,000 | 1-3 |
| 业务员 | - | 15,000/季度 | 10,000 | 1-3 |
| 劳务工 | - | 10,000/季度 | 8,000 | 1-2 |
| 设计师 | - | 18,000/季度 | 12,000 | 1-3 |

### 9.2 团队规模

```typescript
基础团队规模 = 3 人
每 10 点领导力 +2 人

// 示例
领导力 = 0 → 最大 3 人
领导力 = 50 → 最大 13 人
```

### 9.3 团队效果

| 成员类型 | 效果 |
|---------|------|
| 工程师 | 每技能点 +5 质量 |
| 业务员 | 每技能点 +3% 收益 |
| 劳务工 | 每技能点 -2% 成本 |
| 设计师 | 每技能点 +4% 效率 |

### 9.4 领导力获取

| 方式 | 效果 |
|------|------|
| 解决团队问题 | +10 |
| 团队项目成功 | +5 |
| 提升成员士气 | +2 |
| 团队培训 | +3 |

### 9.5 团队问题类型

| 问题类型 | 所需领导力 |
|---------|-----------|
| 冲突 | 10/20/30 |
| 倦怠 | 15/25/35 |
| 失误 | 20/30/40 |
| 索求 | 25/35/45 |

---

## 10. 季度结算系统

### 10.1 结算流程

```
1. 计算工资收入
2. 扣除生活成本（10%-25%工资）
3. 扣除仓储费（库存 × 仓储费率）
4. 应用关系衰减
5. 检查晋升条件
6. 生成季度开始事件（预告）
7. 进入下一季度
```

### 10.2 收支计算

```typescript
收入 = 季度工资 + 奖金事件
支出 = 生活成本 + 仓储费 + 材料费 + 人力费 + 关系维护费
净变化 = 收入 - 支出
```

### 10.3 生活成本

```typescript
生活成本 = 季度工资 × random(10%, 25%)

// 构成
住宿费 + 餐饮费 + 交通费 + 通讯费 + 其他杂费
```

### 10.4 关系衰减

每季度关系值自动衰减，衰减率见第 7.1 节。

### 10.5 季度结算预告

**预告内容**:
1. 本季度收支明细
2. 本季度属性变化汇总
3. 🔮 下季度开始事件预告
4. 预期进入下季度后现金

---

## 11. 胜利与失败条件

### 11.1 胜利条件

**晋升到合伙人** 🎉

- 满足合伙人所有晋升要求
- 自动触发胜利结算

### 11.2 失败条件

| 条件 | 触发阈值 | 结局 |
|------|---------|------|
| **破产** | 现金 ≤ 0 | 💸 资金链断裂，公司宣告破产... |
| **过劳** | 健康 ≤ 0 | 🏥 身体垮了，被送进医院... |
| **封杀** | 声誉 ≤ 0 | 😞 行业封杀，没有任何公司愿意合作... |

### 11.3 游戏结束统计

- 完成项目数
- 优质项目数（质量≥90）
- 总季度数
- 总事件数

---

## 附录 A: 隐藏选项列表

### 实习生（3个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| int_002_prof | 图纸疑问 | 独立研究分析 | 工作能力≥20 |
| int_003_prof | 材料验收 | 专业快速检测 | 工作能力≥20 |
| int_005_prof | 安全隐患 | 豪赌不会出事 | 幸运≥25, 40%风险 |

### 助理工程师（3个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| asst_003_prof | 施工方案编制 | 深度优化方案 | 工作能力≥25 |
| asst_004_prof | 质量问题处理 | 豪赌隐蔽处理 | 幸运≥35, 35%风险 |
| asst_005_prof | 技术攻关 | 自主技术攻关 | 工作能力≥25 |

### 工程师（2个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| eng_001_prof | 专业技术难题 | 技术方案优化 | 工作能力≥30 |
| eng_003_prof | 新技术应用 | 技术攻关突破 | 工作能力≥35 |

### 高级工程师（2个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| sen_001_prof | 重大项目技术负责人 | 革新技术方案 | 工作能力≥50 |
| sen_002_prof | 技术创新项目 | 自主研发突破 | 工作能力≥50 |

### 项目经理（3个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| mgr_001_prof | 项目亏损危机 | 精细化管理扭亏 | 工作能力≥45 |
| mgr_003_prof | 重大项目变更 | 豪赌变更谈判 | 幸运≥45, 25%风险 |
| mgr_004_prof | 分包商管理 | 专业帮扶改进 | 工作能力≥45 |

### 项目总监（3个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| dir_001_prof | 多项目协调 | 精益资源统筹 | 工作能力≥55 |
| dir_002_prof | 战略项目决策 | 豪赌战略机遇 | 幸运≥55, 30%风险 |
| dir_003_prof | 业务拓展 | 创新市场开拓 | 工作能力≥55 |

### 合伙人（2个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| prt_001_prof | 公司战略决策 | 战略革新 | 工作能力≥60 |
| prt_002_prof | 重大投资决策 | 豪赌独角兽项目 | 幸运≥60, 35%风险 |

### 通用事件（6个）

| 事件ID | 事件名称 | 隐藏选项 | 阈值 |
|--------|---------|---------|------|
| com_001_prof | 天气突变 | 豪赌天气好转 | 幸运≥40, 30%风险 |
| com_002_prof | 设备故障 | 技术诊断维修 | 工作能力≥25 |
| com_003_prof | 材料价格波动 | 精准市场预测 | 工作能力≥30 |
| com_004_prof | 现场变更 | 豪赌甲方放弃 | 幸运≥30, 50%风险 |

---

## 附录 B: 公式速查表

### 行动点计算

```
maxActionPoints = floor(健康 / 20)
```

### 价格预测准确率

```
准确率 = 50 + workAbility / 2
```

### 冒险选项成功率

```
成功阈值 = 100 - riskFactor × 100 + luck / 2
```

### 训练成功率

```
高级训练成功率 = 50 + workAbility / 2  (工作训练)
高级训练成功率 = 50 + luck / 2     (幸运训练)
```

### 特殊事件概率

```
概率 = 2 + luck / 20
```

### 关系维护加成

```
workAbility ≥ 60 → 设计院/监理维护收益 × 1.2
```

### 贵人相助

```
luck ≥ 60 → 15% 概率触发
效果: 免费维护 或 收益翻倍
```

---

## 附录 C: 关系系统速查表

### C.1 维护方式一览表（10种）

| ID | 名称 | 关系 | 消耗 | 收益 | 风险 | 加成 |
|----|------|------|------|------|------|------|
| client_dinner | 应酬宴请 | 甲方 | 2000现金, 3健康 | +8-12关系 | 15%过度应酬 | workAbility≥50→×1.2 |
| client_report | 项目汇报 | 甲方 | 2健康 | +5-8关系 | - | progress≥50→+2 |
| design_exchange | 技术交流 | 设计院 | 2健康 | +6-10关系, +1工作能力 | - | workAbility≥60→20%特殊 |
| design_review | 图纸会审 | 设计院 | 3健康 | +4-7关系, +1质量 | - | workAbility≥45→18%特殊 |
| labor_visit | 现场慰问 | 劳务队 | 500现金 | +5-8关系 | 10%劳务纠纷 | reputation≥50→×1.3 |
| labor_resolve | 解决纠纷 | 劳务队 | 0-3000现金 | +8-15关系 | 50%高额费用 | luck≥50→概率降30% |
| supervision_gift | 礼品赠送 | 监理 | 1000现金 | +7-10关系 | 20%廉政检查 | luck≥40→概率降10% |
| supervision_cooperate | 配合验收 | 监理 | 2健康 | +4-6关系, +1质量 | - | workAbility≥50→×1.3 |
| government_visit | 公关拜访 | 政府 | 3000现金, 4健康 | +5-9关系 | 30%大领导 | reputation≥70→概率45% |
| government_study | 政策学习 | 政府 | 3健康 | +4-7关系 | - | workAbility≥55→+2 |

### C.2 负面事件一览表（25个）

#### 甲方关系负面事件

| ID | 关系值 | 事件 | 影响 |
|----|-------|------|------|
| client_low_40 | ≤40 | 甲方刁难 | progress -2, reputation -2 |
| client_low_30 | ≤30 | 工程款拖延 | cash -5000, 甲方关系 -5 |
| client_low_20 | ≤20 | 甲方威胁停工 | progress -5, health -5 |
| client_low_10 | ≤10 | 被踢出项目 | reputation -15, cash -10000 |
| client_low_0 | 0 | 彻底决裂 | reputation -50, 游戏结束 |

#### 监理关系负面事件

| ID | 关系值 | 事件 | 影响 |
|----|-------|------|------|
| supervision_low_40 | ≤40 | 监理挑刺 | quality -2, progress -1 |
| supervision_low_30 | ≤30 | 频繁返工 | cash -3000, progress -3 |
| supervision_low_20 | ≤20 | 停工整改 | progress -8, cash -8000 |
| supervision_low_10 | ≤10 | 吊销执业资格 | reputation -20 |
| supervision_low_0 | 0 | 行业封杀 | reputation -50, 游戏结束 |

#### 设计院关系负面事件

| ID | 关系值 | 事件 | 影响 |
|----|-------|------|------|
| design_low_40 | ≤40 | 图纸变更慢 | progress -2 |
| design_low_30 | ≤30 | 设计配合消极 | quality -2 |
| design_low_20 | ≤20 | 重大设计错误 | cash -10000, quality -5 |
| design_low_10 | ≤10 | 设计院断绝合作 | progress -20, reputation -10 |
| design_low_0 | 0 | 设计全面崩溃 | reputation -50, progress -30, 游戏结束 |

#### 劳务队关系负面事件

| ID | 关系值 | 事件 | 影响 |
|----|-------|------|------|
| labor_low_40 | ≤40 | 工人消极怠工 | progress -2, quality -1 |
| labor_low_30 | ≤30 | 劳务罢工 | progress -5, cash -2000 |
| labor_low_20 | ≤20 | 群体事件 | reputation -10, cash -5000 |
| labor_low_10 | ≤10 | 劳务队集体离职 | progress -15, cash -8000, 游戏结束 |
| labor_low_0 | 0 | 劳务全面断供 | reputation -50, cash -15000, 游戏结束 |

#### 政府关系负面事件

| ID | 关系值 | 事件 | 影响 |
|----|-------|------|------|
| government_low_40 | ≤40 | 检查增多 | health -3, progress -1 |
| government_low_30 | ≤30 | 行政处罚 | cash -5000, reputation -5 |
| government_low_20 | ≤20 | 项目被叫停 | progress -10, cash -15000 |
| government_low_10 | ≤10 | 被列入黑名单 | reputation -30, cash -20000, 游戏结束 |
| government_low_0 | 0 | 吊销资质 | reputation -50, 游戏结束 |

### C.3 赚钱机会事件（5个）

| 关系 | 阈值 | 事件 | 触发 | 收益 |
|------|------|------|------|------|
| 甲方 | ≥75 | 甲方推荐项目 | 每季度20% | cash +8000~15000 |
| 监理 | ≥70 | 验收快速通过奖金 | 季度结算 | 3000~6000 |
| 设计院 | ≥75 | 设计优化奖励 | 完成项目 | 材料 -30% |
| 劳务队 | ≥70 | 劳务成本优惠 | 季度结算 | 0~1500 |
| 政府 | ≥80 | 政府补贴项目 | 每季度15% | cash +10000~20000 |

### C.4 特殊事件解锁（15个）

| 关系 | 阈值 | 数量 | 触发方式 | 特点 |
|------|------|------|---------|------|
| 甲方 | ≥80 | 3个 | 事件阶段15% | ⭐剧情丰富 |
| 监理 | ≥75 | 3个 | 事件阶段15% | ⭐剧情丰富 |
| 设计院 | ≥80 | 3个 | 事件阶段15% | ⭐剧情丰富 |
| 劳务队 | ≥75 | 3个 | 事件阶段15% | ⭐剧情丰富 |
| 政府 | ≥85 | 3个 | 事件阶段15% | ⭐剧情丰富 |

### C.5 功能限制表

| 关系值 | 功能限制 | 解锁条件 |
|-------|---------|---------|
| 甲方 ≤15 | 无法获得新项目，现有项目收益 -50% | 甲方 > 15 |
| 监理 ≤15 | 工程验收自动失败，无法完成季度 | 监理 > 15 |
| 设计院 ≤15 | 无法提升 quality，工程质量锁定 | 设计院 > 15 |
| 劳务队 ≤15 | progress 增益减半，工人流失率 ×3 | 劳务队 > 15 |
| 政府 ≤15 | 每季度额外缴纳"罚款" 3000，无法晋升 | 政府 > 15 |

### C.6 预警系统

| 关系值 | 警告级别 | 提示信息 |
|-------|---------|---------|
| ≤50 | 提示 | "XX 关系紧张，建议维护" |
| ≤30 | 警告 | "XX 关系危急，可能触发负面事件" |
| ≤15 | 紧急 | "XX 关系崩溃，功能已受限" |

---

**文档结束**
